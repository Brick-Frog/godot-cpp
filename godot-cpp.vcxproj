<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="Current" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<PropertyGroup>
		<RepoRoot>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)'))</RepoRoot>
	</PropertyGroup>

	<PropertyGroup Label="Globals">
		<ProjectGuid>{ABCDEF12-38D9-4994-9497-26FF91C85465}</ProjectGuid>
		<RootNamespace>godot</RootNamespace>
		<Keyword>MakeFileProj</Keyword>
		<VCProjectUpgraderObjectName>NoUpgrade</VCProjectUpgraderObjectName>
	</PropertyGroup>

	<PropertyGroup Condition="'$(Configuration)'=='Debug'">
		<GodotTemplate>template_debug</GodotTemplate>
		<BuildType>dev_build=yes</BuildType>
	</PropertyGroup>

	<PropertyGroup Condition="'$(Configuration)'=='Release'">
		<GodotTemplate>template_release</GodotTemplate>
	</PropertyGroup>

	<!-- Windows, MSVC wants Platform specific Win32 or x64 -->
	<PropertyGroup Condition="'$(Platform)'=='Win32'">
		<GodotPlatform>windows</GodotPlatform>
		<Arch>x86_32</Arch>
	</PropertyGroup>
	<PropertyGroup Condition="'$(Platform)'=='x64'">
		<GodotPlatform>windows</GodotPlatform>
		<Arch>x86_64</Arch>
	</PropertyGroup>

	<!-- Linux -->
	<PropertyGroup Condition="'$(Platform)'=='linux-x86_64'">
		<GodotPlatform>linux</GodotPlatform>
		<Arch>x86_64</Arch>
	</PropertyGroup>
	<PropertyGroup Condition="'$(Platform)'=='linux-arm64'">
		<GodotPlatform>linux</GodotPlatform>
		<Arch>arm64</Arch>
	</PropertyGroup>
	<PropertyGroup Condition="'$(Platform)'=='linux-rv64'">
		<GodotPlatform>linux</GodotPlatform>
		<Arch>rv64</Arch>
	</PropertyGroup>

	<!-- macOS (no arch in config) -->
	<PropertyGroup Condition="'$(Platform)'=='macos'">
		<GodotPlatform>macos</GodotPlatform>
		<Arch></Arch> <!-- no arch in example.gdextension -->
	</PropertyGroup>

	<!-- iOS -->
	<PropertyGroup Condition="'$(Platform)'=='ios-arm64'">
		<GodotPlatform>ios</GodotPlatform>
		<Arch>arm64</Arch>
	</PropertyGroup>

	<!-- Android -->
	<PropertyGroup Condition="'$(Platform)'=='android-x86_64'">
		<GodotPlatform>android</GodotPlatform>
		<Arch>x86_64</Arch>
	</PropertyGroup>
	<PropertyGroup Condition="'$(Platform)'=='android-arm64'">
		<GodotPlatform>android</GodotPlatform>
		<Arch>arm64</Arch>
	</PropertyGroup>

	<!-- Web (wasm32) -->
	<PropertyGroup Condition="'$(Platform)'=='web-wasm32'">
		<GodotPlatform>web</GodotPlatform>
		<Arch>wasm32</Arch>
	</PropertyGroup>

	<PropertyGroup>
		<IsWindows>$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))</IsWindows>
		<IsMac>$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))</IsMac>
		<IsLinux>$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))</IsLinux>
	</PropertyGroup>
	<Import Project="$(VCTargetsPath)/Microsoft.Cpp.Default.props" Condition="$(IsWindows)"/>
	<Import Project="$(MSBuildProjectDirectory)/.sln/targets/JetBrains.Rider.Cpp.targets" Condition="$(IsMac) OR $(IsLinux)"/>

	<PropertyGroup Label="UserMacros">
		<!-- can be overridden in godot.user.props -->
		<Precision Condition="'$(Precision)' == ''">single</Precision> <!--single or double-->
		<Threads Condition="'$(Threads)' == ''">threads</Threads>
	</PropertyGroup>
	<Import Project="$(MSBuildProjectDirectory)/.sln/targets/godot.user.props" Condition="Exists('$(MSBuildProjectDirectory)/.sln/targets/godot.user.props')"/>

	<Import Project="$(VCTargetsPath)/Microsoft.Cpp.props" Condition="$(IsWindows)"/>
	<ImportGroup Label="ExtensionSettings">
	</ImportGroup>
	<ItemGroup>
		<None Include="include/godot_cpp/**/*.h"/>
		<None Include="include/godot_cpp/**/*.hpp"/>
		<None Include="include/godot_cpp/**/*.cpp"/>
		<None Include="src/**/*.h"/>
		<None Include="src/**/*.hpp"/>
		<None Include="src/**/*.cpp"/>
		<None Include="gen/include/godot_cpp/**/*.h"/>
		<None Include="gen/include/godot_cpp/**/*.hpp"/>
		<None Include="gen/include/godot_cpp/**/*.cpp"/>
		<None Include="gen/src/**/*.h"/>
		<None Include="gen/src/**/*.hpp"/>
		<None Include="gen/src/**/*.cpp"/>
	</ItemGroup>

</Project>
